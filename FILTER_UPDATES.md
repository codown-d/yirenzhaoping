# 筛选页面更新说明

## 📋 更新内容

我们对筛选页面进行了重要的用户体验改进，主要包括：

### 🗺️ **位置选择 - 三级联动**

**原来**：简单的城市标签选择
**现在**：省份 → 城市 → 区县 三级联动选择

#### 功能特点：

- **智能联动**：选择省份后自动加载对应城市，选择城市后自动加载对应区县
- **禁用状态**：未选择上级时，下级选择器自动禁用
- **多选支持**：可以添加多个具体位置到筛选条件
- **便捷管理**：已选位置以标签形式显示，点击即可移除

#### 覆盖地区：

- **北京市**：16 个区县
- **上海市**：16 个区县
- **广东省**：广州、深圳、珠海、东莞等主要城市
- **江苏省**：南京、苏州、无锡等主要城市
- **浙江省**：杭州、宁波、温州等主要城市
- **四川省**：成都、绵阳等主要城市

### 👥 **年龄段选择 - 下拉选项**（仅招聘方筛选）

**原来**：滑块选择年龄范围
**现在**：下拉选择预设年龄段

#### 年龄段选项：

- **不限** (unlimited)：无年龄要求
- **18 岁以下** (under18)：适合学生或年轻演员
- **18-35 岁** (18-35)：主要工作年龄段
- **35 岁以上** (over35)：资深演员或特殊角色需求

## 🔧 **技术实现**

### 数据结构

```typescript
// 省市区数据结构
const locationData: Record<string, Record<string, string[]>> = {
  省份名: {
    城市名: ["区县1", "区县2", "区县3"],
  },
};

// 年龄段选项
const ageGroupOptions = [
  { value: "unlimited", label: "不限" },
  { value: "under18", label: "18岁以下" },
  { value: "18-35", label: "18-35岁" },
  { value: "over35", label: "35岁以上" },
];
```

### 状态管理

```typescript
// 三级联动状态
const [selectedProvince, setSelectedProvince] = useState<string>("");
const [selectedCity, setSelectedCity] = useState<string>("");
const [selectedDistrict, setSelectedDistrict] = useState<string>("");
const [location, setLocation] = useState<string[]>([]);

// 年龄段状态
const [ageGroup, setAgeGroup] = useState<string>("");
```

### 核心函数

- `getProvinces()` - 获取省份列表
- `getCities(province)` - 根据省份获取城市列表
- `getDistricts(province, city)` - 根据省市获取区县列表
- `addLocationToFilter()` - 添加完整位置到筛选条件
- `removeLocationFilter(location)` - 移除指定位置筛选

## 📱 **用户界面改进**

### 位置选择界面

1. **三个下拉选择器**：省份、城市、区县
2. **添加按钮**：完成三级选择后可添加到筛选条件
3. **已选位置标签**：显示所有已选择的位置，支持点击删除
4. **响应式布局**：移动端单列，桌面端三列显示

### 年龄段选择界面

1. **下拉选择器**：替代原来的滑块
2. **预设选项**：四个常用年龄段选项
3. **清晰标识**：每个选项都有明确的年龄范围说明

## 🎯 **用户体验提升**

### 位置选择

- ✅ **更精确**：可以选择到具体区县级别
- ✅ **更直观**：三级联动逻辑清晰易懂
- ✅ **更灵活**：支持多个位置同时筛选
- ✅ **更便捷**：已选位置一目了然，管理简单

### 年龄段选择

- ✅ **更简单**：预设选项减少操作复杂度
- ✅ **更实用**：符合招聘实际需求的年龄分段
- ✅ **更快速**：一次点击完成选择
- ✅ **更清晰**：选项含义明确，无歧义

## 📄 **影响的页面**

1. **招聘方筛选页面** (`/filter/employer`)

   - 三级联动位置选择
   - 年龄段下拉选择

2. **求职者筛选页面** (`/filter/jobseeker`)
   - 三级联动位置选择
   - 保留原有薪资滑块选择

## 🔄 **数据兼容性**

- **向后兼容**：原有的筛选数据结构保持不变
- **新增字段**：添加了省市区相关的状态管理
- **存储格式**：位置信息以 "省份-城市-区县" 格式存储

## 🚀 **后续优化建议**

1. **数据源**：可以接入真实的省市区数据 API
2. **搜索功能**：在下拉选择器中添加搜索功能
3. **热门位置**：添加热门城市快速选择
4. **位置记忆**：记住用户常用的位置选择
5. **地图集成**：考虑集成地图选择功能

## 🐛 **问题修复**

### Select 组件空值问题

**问题**：Radix UI 的 Select 组件不允许 SelectItem 的 value 为空字符串
**解决方案**：将所有空字符串值替换为有意义的标识符

- 年龄段"不限"：`""` → `"unlimited"`
- 工作性质"不限"：`""` → `"unlimited"`

### 状态初始化

- 所有相关状态的初始值和重置值都更新为 `"unlimited"`
- 确保数据一致性和用户体验的连贯性

---

🎉 **更新完成！用户现在可以享受更精确、更便捷的筛选体验！**
